############################
#
# Country Events
# by Maximilian Olbers
#
############################

namespace = country

@tier1influencecontact = 7
@tier1influencecontactxenophile = 8
@tier1influencecontactmin = 20
@tier1influencecontactmax = 80

@tier2influencecontact = 10
@tier2influencecontactxenophile = 12
@tier2influencecontactmin = 40
@tier2influencecontactmax = 100

@tier1materialreward = 6
@tier1materialmin = 100
@tier1materialmax = 500
@tier2materialreward = 12
@tier2materialmin = 150
@tier2materialmax = 1000
@tier3materialreward = 18
@tier3materialmin = 250
@tier3materialmax = 1500
@tier4materialreward = 24
@tier4materialmin = 350
@tier4materialmax = 2000
@tier5materialreward = 48
@tier5materialmin = 700
@tier5materialmax = 4000

@tier1influencereward = 6
@tier1influencemin = 40
@tier1influencemax = 100
@tier2influencereward = 12
@tier2influencemin = 80
@tier2influencemax = 175
@tier3influencereward = 18
@tier3influencemin = 125
@tier3influencemax = 250
@tier4influencereward = 24
@tier4influencemin = 150
@tier4influencemax = 300
@tier5influencereward = 36
@tier5influencemin = 250
@tier5influencemax = 500
@tier6influencereward = 48
@tier6influencemin = 300
@tier6influencemax = 600

@tier1unityreward = 6
@tier2unityreward = 12
@tier3unityreward = 18
@tier4unityreward = 24
@tier5unityreward = 48

@tier1researchreward = 6
@tier1researchmin = 60
@tier1researchmax = 150
@tier2researchreward = 12
@tier2researchmin = 90
@tier2researchmax = 250
@tier3researchreward = 18
@tier3researchmin = 120
@tier3researchmax = 350
@tier4researchreward = 24
@tier4researchmin = 150
@tier4researchmax = 500
@tier5researchreward = 48
@tier5researchmin = 300
@tier5researchmax = 1000


# Starting Event gatekeeper


############################################
### Rogue Scientist End
############################################

############################################
### Mass Extinction Event Chain
############################################

# hidden, sets PoIs
country_event = {
	id = country.1101
	hide_window = yes

	is_triggered_only = yes
	auto_opens = yes

	immediate = {
		random_owned_planet = { 
			limit = { is_capital = yes }
			save_event_target_as = capital_location
		}
		random_system = {
			limit = {
				NOT = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_planet = { is_planet_class = pc_asteroid }
				distance = {
					source = event_target:capital_location
					max_distance = 190
					min_distance = 5
				}
			}
			random_system_planet = {
				limit = {
					is_planet_class = pc_asteroid
					has_owner = no
				}
				set_planet_flag = massex_1_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.1
						name = "massex_poi_1"
						desc = "massex_poi_1_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
		random_system = {
			limit = {
				NOT = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_planet = { is_planet_moltens = yes } #Union Project
				distance = {
					source = event_target:capital_location
					max_distance = 190
					min_distance = 5
				}
			}
			random_system_planet = {
				limit = {
					is_planet_moltens = yes #Union Project
					has_owner = no
				}
				set_planet_flag = massex_2_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.2
						name = "massex_poi_2"
						desc = "massex_poi_2_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
		random_system = {
			limit = {
				NOT = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_planet = { is_planet_barren = yes  } #Union Project
				distance = {
					source = event_target:capital_location
					max_distance = 190
					min_distance = 5
				}
			}
			random_system_planet = {
				limit = {
					is_planet_barren = yes #Union Project
					has_owner = no
				}
				set_planet_flag = massex_3_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.3
						name = "massex_poi_3"
						desc = "massex_poi_3_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
		random_system = {
			limit = {
				NOT = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_planet = { is_planet_toxics = yes }  #Union Project
				distance = {
					source = event_target:capital_location
					max_distance = 190
					min_distance = 5
				}
			}
			random_system_planet = {
				limit = {
					is_planet_toxics = yes  #Union Project
					has_owner = no
				}
				set_planet_flag = massex_4_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.4
						name = "massex_poi_4"
						desc = "massex_poi_4_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
		random_system = {
			limit = {
				NOT = {
					exists = space_owner
					has_star_flag = hostile_system
					is_star_class = sc_black_hole
					any_planet = {
						has_planet_flag = massex_1_planet
						has_planet_flag = massex_2_planet
						has_planet_flag = massex_3_planet
						has_planet_flag = massex_4_planet
						has_planet_flag = massex_5_planet
					}
				}
				is_pirate_system = no
				any_planet = { is_planet_frozen = yes }  #Union Project
				distance = {
					source = event_target:capital_location
					max_distance = 190
					min_distance = 5
				}
			}
			random_system_planet = {
				limit = {
					is_planet_frozen = yes #Union Project
					has_owner = no
				}
				set_planet_flag = massex_5_planet
				prevent_anomaly = yes
				root = {
					create_point_of_interest = {
						id = massex_poi.5
						name = "massex_poi_5"
						desc = "massex_poi_5_desc"
						event_chain = "mass_extinction_chain"
						location = prev
					}
				}
			}
		}
	}
}


# molten - enables project something burned
country_event = {
	id = country.1110
	title = "country.1110.name"
	desc = "country.1110.desc"
	show_sound = event_scanner
	picture = GFX_evt_satellite_in_orbit
	location = from

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = massex_2_found
			has_country_flag = massex_2_pending
		}
	}

	immediate = {
		set_country_flag = massex_2_pending
		if = {
			limit = {
				fromfrom = {
					any_planet = { has_planet_flag = massex_2_planet } 
					has_access_fleet = root
				}
			}
			set_country_flag = massex_2_found
			remove_country_flag = massex_2_pending
			fromfrom = {
				random_system_planet = {
					limit = { has_planet_flag = massex_2_planet }
					prevent_anomaly = yes
				}
			}
		}
	}

	option = {
		name = "country.1100.owned"
		trigger = { NOT = { has_country_flag = massex_2_found } }
		hidden_effect = {
			remove_country_flag = massex_2_pending
			remove_point_of_interest = massex_poi.2
			random_planet = {
				limit = { has_planet_flag = massex_2_planet }
				remove_planet_flag = massex_2_planet
			}
			capital_scope = { save_event_target_as = capital_location }
			random_system = {
				limit = {
					NOT = {
						exists = space_owner
						has_star_flag = hostile_system
						is_star_class = sc_black_hole
						any_planet = {
							has_planet_flag = massex_1_planet
							has_planet_flag = massex_2_planet
							has_planet_flag = massex_3_planet
							has_planet_flag = massex_4_planet
							has_planet_flag = massex_5_planet
						}
					}
					is_pirate_system = no
					any_planet = { is_planet_moltens = yes } #Union Project
					distance = {
						source = event_target:capital_location
						max_distance = 190
						min_distance = 5
					}
				}
				random_system_planet = {
					limit = {
						is_planet_moltens = yes  #Union Project
						has_owner = no
					}
					set_planet_flag = massex_2_planet
					prevent_anomaly = yes
					root = {
						create_point_of_interest = {
							id = massex_poi.2
							name = "massex_poi_2"
							desc = "massex_poi_2_desc"
							event_chain = "mass_extinction_chain"
							location = prev
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
		trigger = { has_country_flag = massex_2_found }
		fromfrom = {
			random_system_planet = {
				limit = { has_planet_flag = massex_2_planet }
				root = {
					enable_special_project = {
						name = "MASSEX_2_PROJECT"
						location = prev
						owner = root
					}
					hidden_effect = { remove_point_of_interest = massex_poi.2 }
				}
			}
		}
	}
}

# barren - enables project something blasted
country_event = {
	id = country.1115
	title = "country.1115.name"
	desc = "country.1115.desc"
	show_sound = event_scanner
	picture = GFX_evt_underground_civilization
	location = from

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = massex_3_found
			has_country_flag = massex_3_pending
		}
	}

	immediate = {
		set_country_flag = massex_3_pending
		if = {
			limit = {
				fromfrom = {
					any_planet = { has_planet_flag = massex_3_planet } 
					has_access_fleet = root
				}
			}
			set_country_flag = massex_3_found
			remove_country_flag = massex_3_pending
			fromfrom = {
				random_system_planet = {
					limit = { has_planet_flag = massex_3_planet }
					prevent_anomaly = yes
				}
			}
		}
	}

	option = {
		name = "country.1100.owned"
		trigger = { NOT = { has_country_flag = massex_3_found } }
		hidden_effect = {
			remove_country_flag = massex_3_pending
			remove_point_of_interest = massex_poi.3
			random_planet = {
				limit = { has_planet_flag = massex_3_planet }
				remove_planet_flag = massex_3_planet
			}
			capital_scope = { save_event_target_as = capital_location }
			random_system = {
				limit = {
					NOT = {
						exists = space_owner
						has_star_flag = hostile_system
						is_star_class = sc_black_hole
						any_planet = {
							has_planet_flag = massex_1_planet
							has_planet_flag = massex_2_planet
							has_planet_flag = massex_3_planet
							has_planet_flag = massex_4_planet
							has_planet_flag = massex_5_planet
						}
					}
					is_pirate_system = no
					any_planet = { is_planet_barren = yes } #Union Project
					distance = {
						source = event_target:capital_location
						max_distance = 190
						min_distance = 5
					}
				}
				random_system_planet = {
					limit = {
						is_planet_barren = yes #Union Project
						has_owner = no
					}
					set_planet_flag = massex_3_planet
					prevent_anomaly = yes
					root = {
						create_point_of_interest = {
							id = massex_poi.3
							name = "massex_poi_3"
							desc = "massex_poi_3_desc"
							event_chain = "mass_extinction_chain"
							location = prev
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
		trigger = { has_country_flag = massex_3_found }
		fromfrom = {
			random_system_planet = {
				limit = { has_planet_flag = massex_3_planet }
				root = {
					enable_special_project = {
						name = "MASSEX_3_PROJECT"
						location = prev
						owner = root
					}
					hidden_effect = { remove_point_of_interest = massex_poi.3 }
				}
			}
		}
	}
}

# toxic - enables project something envenomed
country_event = {
	id = country.1120
	title = "country.1120.name"
	desc = "country.1120.desc"
	show_sound = event_scanner
	picture = GFX_evt_alien_nature
	location = from

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = massex_4_found
			has_country_flag = massex_4_pending
		}
	}

	immediate = {
		set_country_flag = massex_4_pending
		if = {
			limit = {
				fromfrom = {
					any_planet = { has_planet_flag = massex_4_planet } 
					has_access_fleet = root
				}
			}
			set_country_flag = massex_4_found
			remove_country_flag = massex_4_pending
			fromfrom = {
				random_system_planet = {
					limit = { has_planet_flag = massex_4_planet }
					prevent_anomaly = yes
				}
			}
		}
	}

	option = {
		name = "country.1100.owned"
		trigger = { NOT = { has_country_flag = massex_4_found } }
		hidden_effect = {
			remove_country_flag = massex_4_pending
			remove_point_of_interest = massex_poi.4
			random_planet = {
				limit = { has_planet_flag = massex_4_planet }
				remove_planet_flag = massex_4_planet
			}
			capital_scope = { save_event_target_as = capital_location }
			random_system = {
				limit = {
					NOT = {
						exists = space_owner
						has_star_flag = hostile_system
						is_star_class = sc_black_hole
						any_planet = {
							has_planet_flag = massex_1_planet
							has_planet_flag = massex_2_planet
							has_planet_flag = massex_3_planet
							has_planet_flag = massex_4_planet
							has_planet_flag = massex_5_planet
						}
					}
					is_pirate_system = no
					any_planet = { is_planet_toxics = yes } #Union Project
					distance = {
						source = event_target:capital_location
						max_distance = 190
						min_distance = 5
					}
				}
				random_system_planet = {
					limit = {
						is_planet_toxics = yes  #Union Project
						has_owner = no
					}
					set_planet_flag = massex_4_planet
					prevent_anomaly = yes
					root = {
						create_point_of_interest = {
							id = massex_poi.4
							name = "massex_poi_4"
							desc = "massex_poi_4_desc"
							event_chain = "mass_extinction_chain"
							location = prev
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
		trigger = { has_country_flag = massex_4_found }
		fromfrom = {
			random_system_planet = {
				limit = { has_planet_flag = massex_4_planet }
				root = {
					enable_special_project = {
						name = "MASSEX_4_PROJECT"
						location = prev
						owner = root
					}
					hidden_effect = { remove_point_of_interest = massex_poi.4 }
				}
			}
		}
	}
}

# frozen - enables project something chilled
country_event = {
	id = country.1125
	title = "country.1125.name"
	desc = "country.1125.desc"
	show_sound = event_scanner
	picture = GFX_evt_outpost
	location = from

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = massex_5_found
			has_country_flag = massex_5_pending
		}
	}

	immediate = {
		set_country_flag = massex_5_pending
		if = {
			limit = {
				fromfrom = {
					any_planet = { has_planet_flag = massex_5_planet } 
					has_access_fleet = root
				}
			}
			set_country_flag = massex_5_found
			remove_country_flag = massex_5_pending
			fromfrom = {
				random_system_planet = {
					limit = { has_planet_flag = massex_5_planet }
					prevent_anomaly = yes
				}
			}
		}
	}

	option = {
		name = "country.1100.owned"
		trigger = { NOT = { has_country_flag = massex_5_found } }
		hidden_effect = {
			remove_country_flag = massex_5_pending
			remove_point_of_interest = massex_poi.5
			random_planet = {
				limit = { has_planet_flag = massex_5_planet }
				remove_planet_flag = massex_5_planet
			}
			capital_scope = { save_event_target_as = capital_location }
			random_system = {
				limit = {
					NOT = {
						exists = space_owner
						has_star_flag = hostile_system
						is_star_class = sc_black_hole
						any_planet = {
							has_planet_flag = massex_1_planet
							has_planet_flag = massex_2_planet
							has_planet_flag = massex_3_planet
							has_planet_flag = massex_4_planet
							has_planet_flag = massex_5_planet
						}
					}
					is_pirate_system = no
					any_planet = { is_planet_frozen = yes } # Union Project
					distance = {
						source = event_target:capital_location
						max_distance = 190
						min_distance = 5
					}
				}
				random_system_planet = {
					limit = {
						is_planet_frozen = yes  #Union Project
						has_owner = no
					}
					set_planet_flag = massex_5_planet
					prevent_anomaly = yes
					root = {
						create_point_of_interest = {
							id = massex_poi.5
							name = "massex_poi_5"
							desc = "massex_poi_5_desc"
							event_chain = "mass_extinction_chain"
							location = prev
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
		trigger = { has_country_flag = massex_5_found }
		fromfrom = {
			random_system_planet = {
				limit = { has_planet_flag = massex_5_planet }
				root = {
					enable_special_project = {
						name = "MASSEX_5_PROJECT"
						location = prev
						owner = root
					}
					hidden_effect = { remove_point_of_interest = massex_poi.5 }
				}
			}
		}
	}
}
